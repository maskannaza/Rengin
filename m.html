<!doctype html>
<html lang="ku" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AriGaming â€” Ù…Û•ØªÛ•Úµ Ùˆ ÛŒØ§Ø±ÛŒ</title>

  <!-- Kurdish-friendly font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Firebase -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/10.7.1/firebase-app-compat.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/10.7.1/firebase-auth-compat.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/10.7.1/firebase-firestore-compat.min.js"></script>

  <style>
    :root{
      --bg:#07090d;
      --bg2:#0b0f17;
      --card:#101521;
      --text:#e9eefc;
      --muted:#93a1c6;
      --line:rgba(255,255,255,.08);
      --blue:#3b82f6;
      --blue2:#60a5fa;
      --gold:#f5d38b;
      --green:#22c55e;
      --red:#ef4444;
      --purple:#a855f7;
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Vazirmatn", system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(900px 480px at 70% 12%, rgba(59,130,246,.12), transparent 55%),
        radial-gradient(900px 520px at 10% 20%, rgba(96,165,250,.10), transparent 55%),
        linear-gradient(180deg, #04050a 0%, #07090d 40%, #060814 100%);
      color:var(--text);
      overflow-x:hidden;
      min-height:100vh;
    }

    /* App shell */
    .app{
      max-width: 460px;
      margin: 0 auto;
      min-height: 100vh;
      padding: 22px 16px 110px;
      position: relative;
    }

    /* Header */
    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-top: 6px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .logo{
      width:40px;height:40px;border-radius:14px;
      background: linear-gradient(135deg, rgba(255,255,255,.12), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 12px 30px rgba(0,0,0,.35);
      overflow:hidden;
      display:grid;place-items:center;
      user-select:none;
    }
    .logo img{width:100%;height:100%;object-fit:cover}
    .brand h1{
      margin:0;
      font-size: 20px;
      font-weight:900;
      letter-spacing:.2px;
      line-height:1.1;
    }
    .brand .sub{
      display:block;
      margin-top:4px;
      font-size:12px;
      color: var(--muted);
      font-weight:700;
    }
    .userPill{
      display:flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
      cursor:pointer;
    }
    .userPill i{color: var(--blue2)}
    .userPill small{color:var(--muted); font-weight:800}
    .userPill .lvlBadge{
      background: linear-gradient(180deg, rgba(245,211,139,.98), rgba(176,139,88,.98));
      color: #2a1c08;
      font-size:10px;
      font-weight:1000;
      padding:4px 8px;
      border-radius:999px;
    }
    .userAvatar{
      width:28px;height:28px;
      border-radius:50%;
      object-fit:cover;
      border:2px solid rgba(255,255,255,.15);
    }

    /* Page title */
    .pageTitle{
      margin: 18px 0 10px;
      font-size: 34px;
      font-weight: 900;
      letter-spacing: .2px;
    }

    /* Section */
    .section{
      margin-top: 18px;
      padding-top: 12px;
      border-top: 1px solid var(--line);
    }
    .sectionHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin: 10px 0 12px;
    }
    .sectionHead .left{
      display:flex; align-items:center; gap:10px;
      font-weight: 900;
      letter-spacing: .2px;
    }
    .sectionHead i{color: var(--blue2)}
    .sectionHead span{font-size: 18px}
    .miniBtn{
      border:none;
      cursor:pointer;
      padding: 10px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      color: rgba(233,238,252,.90);
      font-weight:900;
    }
    .miniBtn:active{transform: translateY(1px)}

    /* Home Navigation Boxes */
    .homeBoxes{
      display:grid;
      gap:14px;
    }
    .homeBox{
      border-radius: 24px;
      padding: 20px 18px;
      position:relative;
      overflow:hidden;
      cursor:pointer;
      transition: transform .18s ease, border-color .18s ease;
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
    }
    .homeBox:hover{transform: translateY(-3px); border-color: rgba(245,211,139,.25)}
    .homeBox:active{transform: translateY(0)}

    .homeBox.matalBox{
      background:
        radial-gradient(220px 220px at 30% 15%, rgba(255,255,255,.08), transparent 60%),
        linear-gradient(180deg, rgba(128,0,18,.58), rgba(55,0,12,.68));
    }
    .homeBox.quizBox{
      background:
        radial-gradient(220px 220px at 70% 15%, rgba(168,85,247,.25), transparent 60%),
        linear-gradient(180deg, rgba(88,28,135,.65), rgba(49,10,94,.75));
    }
    .homeBox.leaderBox{
      background:
        radial-gradient(220px 220px at 50% 15%, rgba(245,211,139,.20), transparent 60%),
        linear-gradient(180deg, rgba(180,120,40,.55), rgba(100,60,20,.70));
    }

    .homeBox::before{
      content:"";
      position:absolute; inset:8px;
      border-radius: 18px;
      border: 2px solid rgba(255,255,255,.10);
      pointer-events:none;
    }

    .boxContent{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
    }
    .boxIcon{
      width:70px;height:70px;
      border-radius:20px;
      display:grid;place-items:center;
      background: rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.12);
      font-size: 32px;
      flex-shrink:0;
    }
    .boxInfo{flex:1}
    .boxTitle{
      font-size:20px;
      font-weight:1000;
      margin-bottom:6px;
    }
    .boxDesc{
      font-size:13px;
      color:rgba(233,238,252,.70);
      font-weight:700;
      line-height:1.7;
    }
    .boxArrow{
      width:44px;height:44px;
      border-radius:14px;
      display:grid;place-items:center;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      color:var(--text);
      font-size:16px;
      flex-shrink:0;
    }

    /* Search */
    .searchBar{
      margin-top: 6px;
      display:flex;
      align-items:center;
      gap:10px;
      padding: 12px 14px;
      border-radius: 18px;
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 16px 45px rgba(0,0,0,.35);
    }
    .searchBar i{color: var(--blue2)}
    .searchBar input{
      border:none;
      outline:none;
      background: transparent;
      color: var(--text);
      width:100%;
      font-size: 16px;
      font-weight: 700;
      padding: 2px 0;
    }
    .searchBar input::placeholder{color: rgba(233,238,252,.45); font-weight:700}

    .hint{
      margin-top: 6px;
      color: rgba(233,238,252,.55);
      font-weight: 700;
      font-size: 12px;
      line-height:1.7;
    }

    /* Chips */
    .chips{
      display:flex;
      gap:10px;
      overflow:auto;
      padding: 10px 2px 2px;
      scrollbar-width:none;
    }
    .chips::-webkit-scrollbar{display:none}
    .chip{
      flex: 0 0 auto;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      color: rgba(233,238,252,.78);
      font-weight: 900;
      font-size: 12px;
      cursor:pointer;
      user-select:none;
    }
    .chip.active{
      background: rgba(59,130,246,.18);
      border-color: rgba(96,165,250,.30);
      color: var(--blue2);
      box-shadow: inset 0 0 0 1px rgba(96,165,250,.18);
    }

    /* Matal Card */
    .matalWrap{display:grid; gap: 14px}
    .matalCard{
      border-radius: 22px;
      padding: 16px;
      background:
        radial-gradient(220px 220px at 35% 20%, rgba(255,255,255,.08), transparent 60%),
        linear-gradient(180deg, rgba(128,0,18,.58), rgba(55,0,12,.68));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
      cursor:pointer;
      transition: transform .15s ease, border-color .15s ease;
    }
    .matalCard:hover{transform: translateY(-2px); border-color: rgba(245,211,139,.22)}

    .matalCard::before{
      content:"";
      position:absolute; inset:10px;
      border-radius: 18px;
      border: 2px solid rgba(255,255,255,.12);
      box-shadow:
        inset 0 0 0 2px rgba(0,0,0,.35),
        inset 0 0 40px rgba(0,0,0,.35);
      pointer-events:none;
    }
    .matalTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 4px 0 8px;
    }
    .mEmoji{
      font-size: 54px;
      filter: drop-shadow(0 14px 18px rgba(0,0,0,.45));
      transform: translateY(-2px);
    }
    .meta{
      text-align:left;
      display:flex;
      flex-direction:column;
      gap:6px;
      align-items:flex-end;
    }
    .badge{
      font-size: 11px;
      font-weight: 1000;
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(233,238,252,.85);
      backdrop-filter: blur(10px);
    }
    .badge.gold{color:#2a1c08; background: linear-gradient(180deg, rgba(245,211,139,.98), rgba(176,139,88,.98)); border-color: rgba(0,0,0,.18)}
    .smallDate{
      font-size: 12px;
      color: rgba(233,238,252,.60);
      font-weight: 800;
    }

    .ribbon{
      margin: 4px auto 10px;
      width: fit-content;
      padding: 10px 18px;
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(245,211,139,.98), rgba(176,139,88,.98));
      color: #2a1c08;
      font-weight: 1000;
      box-shadow: 0 14px 28px rgba(0,0,0,.35);
      border: 1px solid rgba(0,0,0,.18);
      text-align:center;
      letter-spacing:.1px;
    }
    .matalBody{
      background: linear-gradient(180deg, rgba(12,16,26,.76), rgba(10,12,18,.72));
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      padding: 14px 14px 16px;
      color: rgba(233,238,252,.92);
      line-height: 1.95;
      font-weight: 700;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.35);
    }
    .matalFooter{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-top: 12px;
      gap: 10px;
    }
    .miniAction{
      display:flex; gap:10px; align-items:center;
    }
    .iconBtn{
      width:44px;height:42px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(233,238,252,.92);
      cursor:pointer;
    }
    .iconBtn:active{transform: translateY(1px)}
    .views{
      font-size: 12px;
      color: rgba(233,238,252,.60);
      font-weight: 900;
    }

    /* Bottom nav */
    .nav{
      position: fixed;
      bottom: 16px;
      left: 50%;
      transform: translateX(-50%);
      width: min(460px, calc(100% - 26px));
      background: rgba(20,24,36,.55);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 22px;
      padding: 12px 14px;
      backdrop-filter: blur(14px);
      box-shadow: 0 20px 60px rgba(0,0,0,.65);
      z-index: 50;
    }
    .navRow{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
    }
    .navBtn{
      width: 56px;
      height: 42px;
      border-radius: 16px;
      border: none;
      background: transparent;
      color: rgba(233,238,252,.70);
      display:grid;
      place-items:center;
      cursor:pointer;
      transition: background .15s ease, color .15s ease, transform .15s ease;
    }
    .navBtn i{font-size: 18px}
    .navBtn.active{
      background: rgba(59,130,246,.18);
      color: var(--blue2);
      transform: translateY(-1px);
      box-shadow: inset 0 0 0 1px rgba(96,165,250,.25);
    }

    /* Pages */
    .page{display:none}
    .page.active{display:block}

    /* HERO */
    .hero{
      border-radius: 26px;
      padding: 18px 16px 16px;
      background:
        radial-gradient(320px 220px at 75% 10%, rgba(96,165,250,.16), transparent 58%),
        radial-gradient(260px 200px at 20% 20%, rgba(245,211,139,.14), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .hero.purple{
      background:
        radial-gradient(320px 220px at 75% 10%, rgba(168,85,247,.20), transparent 58%),
        radial-gradient(260px 200px at 20% 20%, rgba(245,211,139,.10), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    }
    .hero.golden{
      background:
        radial-gradient(320px 220px at 75% 10%, rgba(245,211,139,.22), transparent 58%),
        radial-gradient(260px 200px at 20% 20%, rgba(180,120,40,.18), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    }
    .hero::after{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(280px 160px at 20% 0%, rgba(59,130,246,.10), transparent 60%);
      pointer-events:none;
    }
    .heroTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      position:relative;
      z-index:1;
    }
    .heroTitle{
      margin:0;
      font-weight:1000;
      font-size: 18px;
      line-height:1.5;
    }
    .heroDesc{
      margin: 8px 0 0;
      color: rgba(233,238,252,.70);
      font-weight: 750;
      line-height:1.85;
      font-size: 13px;
    }
    .heroIcon{
      width:52px;height:52px;border-radius:18px;
      display:grid;place-items:center;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 18px 45px rgba(0,0,0,.45);
      font-size: 22px;
      color: var(--gold);
      flex: 0 0 auto;
    }

    /* Quiz Styles */
    .quizStats{
      display:flex;
      gap:10px;
      margin-top:14px;
      flex-wrap:wrap;
    }
    .statBox{
      flex:1;
      min-width:80px;
      padding:12px;
      border-radius:16px;
      background:rgba(0,0,0,.20);
      border:1px solid rgba(255,255,255,.10);
      text-align:center;
    }
    .statValue{
      font-size:22px;
      font-weight:1000;
      color:var(--gold);
    }
    .statLabel{
      font-size:11px;
      color:rgba(233,238,252,.60);
      font-weight:800;
      margin-top:4px;
    }

    .quizCard{
      border-radius: 24px;
      padding: 20px 18px;
      background:
        radial-gradient(220px 220px at 30% 15%, rgba(168,85,247,.15), transparent 60%),
        linear-gradient(180deg, rgba(88,28,135,.55), rgba(49,10,94,.65));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
      margin-top:14px;
    }
    .quizCard::before{
      content:"";
      position:absolute; inset:10px;
      border-radius: 18px;
      border: 2px solid rgba(255,255,255,.10);
      pointer-events:none;
    }

    .levelBadge{
      display:inline-block;
      padding:8px 14px;
      border-radius:999px;
      background: linear-gradient(180deg, rgba(168,85,247,.90), rgba(126,34,206,.90));
      color:#fff;
      font-size:12px;
      font-weight:1000;
      margin-bottom:12px;
    }

    .questionNum{
      font-size:12px;
      color:rgba(233,238,252,.60);
      font-weight:800;
      margin-bottom:8px;
    }
    .questionText{
      font-size:17px;
      font-weight:900;
      line-height:1.8;
      margin-bottom:16px;
    }

    .optionsGrid{
      display:grid;
      gap:10px;
    }
    .optionBtn{
      width:100%;
      padding:14px 16px;
      border-radius:16px;
      background:rgba(255,255,255,.06);
      border:2px solid rgba(255,255,255,.12);
      color:var(--text);
      font-size:15px;
      font-weight:800;
      text-align:right;
      cursor:pointer;
      transition: all .18s ease;
      display:flex;
      align-items:center;
      gap:12px;
    }
    .optionBtn:hover{
      background:rgba(255,255,255,.10);
      border-color:rgba(168,85,247,.40);
    }
    .optionBtn.selected{
      background:rgba(168,85,247,.20);
      border-color:rgba(168,85,247,.50);
    }
    .optionBtn.correct{
      background:rgba(34,197,94,.20);
      border-color:var(--green);
    }
    .optionBtn.wrong{
      background:rgba(239,68,68,.20);
      border-color:var(--red);
    }
    .optionBtn:disabled{
      cursor:not-allowed;
      opacity:.8;
    }
    .optionLetter{
      width:32px;height:32px;
      border-radius:10px;
      background:rgba(0,0,0,.25);
      display:grid;place-items:center;
      font-weight:1000;
      font-size:14px;
      flex-shrink:0;
    }

    .quizActions{
      display:flex;
      gap:10px;
      margin-top:16px;
    }
    .quizBtn{
      flex:1;
      padding:14px;
      border-radius:16px;
      border:none;
      font-size:14px;
      font-weight:1000;
      cursor:pointer;
      transition: transform .15s ease;
    }
    .quizBtn:active{transform:translateY(1px)}
    .quizBtn.primary{
      background: linear-gradient(180deg, rgba(168,85,247,.90), rgba(126,34,206,.90));
      color:#fff;
    }
    .quizBtn.secondary{
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      color:var(--text);
    }
    .quizBtn:disabled{opacity:.5;cursor:not-allowed}

    .resultCard{
      text-align:center;
      padding:30px 20px;
    }
    .resultEmoji{
      font-size:64px;
      margin-bottom:16px;
    }
    .resultTitle{
      font-size:24px;
      font-weight:1000;
      margin-bottom:8px;
    }
    .resultDesc{
      color:rgba(233,238,252,.70);
      font-weight:700;
      margin-bottom:20px;
    }
    .resultStats{
      display:flex;
      justify-content:center;
      gap:20px;
      margin-bottom:20px;
    }

    /* Auth Modal */
    .authOverlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.80);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:100;
      padding:20px;
    }
    .authOverlay.show{display:flex}
    .authCard{
      width:min(400px,100%);
      border-radius:26px;
      background:
        radial-gradient(300px 200px at 50% 0%, rgba(59,130,246,.15), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 40px 120px rgba(0,0,0,.75);
      padding:24px 20px;
    }
    .authTitle{
      font-size:22px;
      font-weight:1000;
      text-align:center;
      margin-bottom:6px;
    }
    .authDesc{
      text-align:center;
      color:rgba(233,238,252,.60);
      font-weight:700;
      font-size:13px;
      margin-bottom:20px;
    }
    .googleBtn{
      width:100%;
      padding:14px 16px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.15);
      background: rgba(255,255,255,.08);
      color:var(--text);
      font-size:15px;
      font-weight:900;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
      transition: all .18s ease;
    }
    .googleBtn:hover{
      background: rgba(255,255,255,.12);
      border-color: rgba(255,255,255,.22);
    }
    .googleBtn:active{transform:translateY(1px)}
    .googleBtn svg{
      width:20px;
      height:20px;
    }
    .authError{
      background:rgba(239,68,68,.15);
      border:1px solid rgba(239,68,68,.30);
      border-radius:12px;
      padding:12px;
      color:#fca5a5;
      font-size:13px;
      font-weight:700;
      margin-bottom:12px;
      display:none;
    }
    .authError.show{display:block}
    .authClose{
      margin-top:16px;
      text-align:center;
    }
    .authClose button{
      background:transparent;
      border:none;
      color:rgba(233,238,252,.50);
      font-weight:700;
      font-size:13px;
      cursor:pointer;
    }
    .authClose button:hover{color:rgba(233,238,252,.70)}

    /* Modal */
    .modal{
      position:fixed; inset:0;
      background: rgba(0,0,0,.68);
      display:none;
      align-items:flex-end;
      justify-content:center;
      z-index: 99;
      padding: 18px;
    }
    .modal.show{display:flex}
    .sheet{
      width: min(460px, 100%);
      border-radius: 26px;
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 30px 120px rgba(0,0,0,.75);
      overflow:hidden;
    }
    .sheetHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 14px 14px 10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
    }
    .sheetHead strong{font-size: 14px}
    .closeBtn{
      width:42px;height:38px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      cursor:pointer;
    }
    .sheetBody{padding: 14px}
    .sheetBigEmoji{
      display:grid;place-items:center;
      font-size: 64px;
      margin: 6px 0 4px;
      filter: drop-shadow(0 16px 18px rgba(0,0,0,.5));
    }
    .sheetRibbon{
      margin: 10px auto 12px;
      width: fit-content;
      padding: 10px 18px;
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(245,211,139,.98), rgba(176,139,88,.98));
      color: #2a1c08;
      font-weight: 1000;
      border: 1px solid rgba(0,0,0,.18);
      box-shadow: 0 14px 28px rgba(0,0,0,.35);
    }
    .sheetText{
      background: rgba(0,0,0,.20);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 18px;
      padding: 14px;
      line-height: 2.0;
      font-weight: 750;
      color: rgba(233,238,252,.92);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.35);
    }
    .sheetRow{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      margin-top: 12px;
      color: rgba(233,238,252,.70);
      font-weight: 800;
      font-size: 12px;
    }
    .copyBtn{
      border:none;
      cursor:pointer;
      padding: 10px 12px;
      border-radius: 16px;
      background: rgba(59,130,246,.16);
      border:1px solid rgba(96,165,250,.25);
      color: var(--blue2);
      font-weight: 1000;
    }
    .copyBtn:active{transform: translateY(1px)}

    /* User dropdown */
    .userDropdown{
      position:absolute;
      top:60px;
      left:16px;
      width:200px;
      background:rgba(20,24,36,.95);
      border:1px solid rgba(255,255,255,.12);
      border-radius:18px;
      padding:10px;
      box-shadow: 0 20px 60px rgba(0,0,0,.65);
      backdrop-filter:blur(14px);
      display:none;
      z-index:60;
    }
    .userDropdown.show{display:block}
    .dropItem{
      padding:12px 14px;
      border-radius:12px;
      font-weight:800;
      font-size:13px;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:10px;
      color:rgba(233,238,252,.85);
    }
    .dropItem:hover{background:rgba(255,255,255,.08)}
    .dropItem i{width:18px;text-align:center;color:var(--blue2)}
    .dropItem.danger{color:#fca5a5}
    .dropItem.danger i{color:#fca5a5}

    /* Leaderboard Styles */
    .leaderList{
      display:grid;
      gap:10px;
      margin-top:14px;
    }
    .leaderItem{
      display:flex;
      align-items:center;
      gap:14px;
      padding:14px 16px;
      border-radius:18px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
      transition: all .18s ease;
    }
    .leaderItem:hover{
      background:rgba(255,255,255,.08);
      border-color:rgba(245,211,139,.20);
    }
    .leaderItem.top1{
      background: linear-gradient(135deg, rgba(245,211,139,.15), rgba(180,120,40,.10));
      border-color:rgba(245,211,139,.30);
    }
    .leaderItem.top2{
      background: linear-gradient(135deg, rgba(192,192,192,.12), rgba(128,128,128,.08));
      border-color:rgba(192,192,192,.25);
    }
    .leaderItem.top3{
      background: linear-gradient(135deg, rgba(205,127,50,.12), rgba(140,80,30,.08));
      border-color:rgba(205,127,50,.25);
    }
    .leaderItem.current{
      border-color:var(--blue2);
      box-shadow: 0 0 0 1px rgba(96,165,250,.25);
    }
    .leaderRank{
      width:36px;height:36px;
      border-radius:12px;
      display:grid;place-items:center;
      font-weight:1000;
      font-size:14px;
      flex-shrink:0;
      background:rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.10);
    }
    .leaderRank.gold{
      background: linear-gradient(180deg, rgba(245,211,139,.95), rgba(176,139,88,.95));
      color:#2a1c08;
      border:none;
    }
    .leaderRank.silver{
      background: linear-gradient(180deg, rgba(192,192,192,.90), rgba(150,150,150,.90));
      color:#333;
      border:none;
    }
    .leaderRank.bronze{
      background: linear-gradient(180deg, rgba(205,127,50,.90), rgba(160,90,40,.90));
      color:#fff;
      border:none;
    }
    .leaderAvatar{
      width:40px;height:40px;
      border-radius:50%;
      object-fit:cover;
      border:2px solid rgba(255,255,255,.15);
      flex-shrink:0;
    }
    .leaderAvatarPlaceholder{
      width:40px;height:40px;
      border-radius:50%;
      background:rgba(255,255,255,.10);
      display:grid;place-items:center;
      color:rgba(233,238,252,.60);
      font-size:18px;
      flex-shrink:0;
    }
    .leaderInfo{
      flex:1;
      min-width:0;
    }
    .leaderName{
      font-weight:900;
      font-size:14px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .leaderMeta{
      font-size:11px;
      color:rgba(233,238,252,.55);
      font-weight:700;
      margin-top:2px;
    }
    .leaderScore{
      text-align:left;
      flex-shrink:0;
    }
    .leaderCorrect{
      font-size:18px;
      font-weight:1000;
      color:var(--gold);
    }
    .leaderLabel{
      font-size:10px;
      color:rgba(233,238,252,.50);
      font-weight:700;
    }
    .leaderLoading{
      text-align:center;
      padding:40px 20px;
      color:rgba(233,238,252,.60);
      font-weight:700;
    }
    .leaderEmpty{
      text-align:center;
      padding:40px 20px;
      color:rgba(233,238,252,.50);
      font-weight:700;
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- Top -->
    <div class="top">
      <div class="brand">
        <div class="logo" title="AriGaming">
          <img src="ari-logo.jpg" alt="AriGaming Logo"
               onerror="this.style.display='none'; this.parentElement.innerHTML='<span style=&quot;font-weight:1000;color:#fff&quot;>A</span>';">
        </div>
        <div>
          <h1>AriGaming <span class="sub">Ù…Û•ØªÛ•Úµ Ùˆ ÛŒØ§Ø±ÛŒ Ú©ÙˆØ±Ø¯ÛŒ</span></h1>
        </div>
      </div>

      <div class="userPill" id="userPill" onclick="toggleUserDropdown()">
        <img class="userAvatar" id="userAvatar" src="" alt="" style="display:none">
        <i class="fa-solid fa-user" id="userIcon"></i>
        <small id="userNameDisplay">Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•</small>
        <span class="lvlBadge" id="userLvlBadge" style="display:none">Lvl 1</span>
      </div>

      <div class="userDropdown" id="userDropdown">
        <div class="dropItem" id="dropProfile" style="display:none">
          <i class="fa-solid fa-user"></i>
          <span id="dropUsername">â€”</span>
        </div>
        <div class="dropItem" id="dropLogin" onclick="showAuth()">
          <i class="fa-solid fa-right-to-bracket"></i>
          <span>Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•</span>
        </div>
        <div class="dropItem danger" id="dropLogout" style="display:none" onclick="logout()">
          <i class="fa-solid fa-right-from-bracket"></i>
          <span>Ú†ÙˆÙˆÙ†Û•Ø¯Û•Ø±Û•ÙˆÛ•</span>
        </div>
      </div>
    </div>

    <!-- PAGES -->
    <!-- HOME -->
    <section class="page active" id="page-home">
      <div class="pageTitle">Ø³Û•Ø±Û•ØªØ§</div>

      <div class="section" style="border-top:none;padding-top:0">
        <div class="homeBoxes">
          <!-- Matal Box -->
          <div class="homeBox matalBox" onclick="goPage('matal')">
            <div class="boxContent">
              <div class="boxIcon">ğŸ“œ</div>
              <div class="boxInfo">
                <div class="boxTitle">Ù…Û•ØªÛ•ÚµÛŒ Ú©ÙˆØ±Ø¯ÛŒ</div>
                <div class="boxDesc">Ú©Û†Ù…Û•ÚµÛ•ÛŒ Ù…Û•ØªÛ•Úµ Ùˆ Ù¾Û•Ù†Ø¯ÛŒ Ù‚ÙˆÙˆÚµÛŒ Ú©ÙˆØ±Ø¯ÛŒ â€” ÙˆØ´Û•ÛŒ Ú©ÙˆØ±ØªØŒ ÙˆØ§ØªØ§ÛŒ Ø¯Ø±ÛÚ˜</div>
              </div>
              <div class="boxArrow"><i class="fa-solid fa-chevron-left"></i></div>
            </div>
          </div>

          <!-- Quiz Box -->
          <div class="homeBox quizBox" onclick="goPage('quiz')">
            <div class="boxContent">
              <div class="boxIcon">ğŸ§ </div>
              <div class="boxInfo">
                <div class="boxTitle">ÛŒØ§Ø±ÛŒ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ</div>
                <div class="boxDesc">Ø¦Ø§Ø³Øª Ø¨Û• Ø¦Ø§Ø³Øª Ù¾Ø±Ø³ÛŒØ§Ø±Û• Ù‚ÙˆÙˆÚµÛ•Ú©Ø§Ù† Ø¨ÙˆÛ•ÚµØ§Ù…Ø¨Ø¯Û•Ø±Û•ÙˆÛ• Ùˆ Ø®Ø§Úµ Ú©Û†Ø¨Ú©Û•Ø±Û•ÙˆÛ•</div>
              </div>
              <div class="boxArrow"><i class="fa-solid fa-chevron-left"></i></div>
            </div>
          </div>

          <!-- Leaderboard Box -->
          <div class="homeBox leaderBox" onclick="goPage('leaderboard')">
            <div class="boxContent">
              <div class="boxIcon">ğŸ†</div>
              <div class="boxInfo">
                <div class="boxTitle">Ù¾Ù„Û•Ø¨Û•Ù†Ø¯ÛŒ</div>
                <div class="boxDesc">Ø¨Ø¨ÛŒÙ†Û• Ú©Û Ù„Û• Ø³Û•Ø±Û•ÙˆÛ•ÛŒ Ù„ÛŒØ³ØªÛ•Ú©Û•Ø¯Ø§ÛŒÛ• Ùˆ Ú•Ú©Ø§Ø¨Û•Ø±ÛŒ Ø¨Ú©Û•</div>
              </div>
              <div class="boxArrow"><i class="fa-solid fa-chevron-left"></i></div>
            </div>
          </div>
        </div>

        <div class="hint" style="margin-top:14px">
          Ø¨Û•Ø®ÛØ±Ø¨ÛÛŒØª Ø¨Û† AriGaming! Ù„ÛØ±Û•Ø¯Ø§ Ø¯Û•ØªÙˆØ§Ù†ÛŒØª Ù…Û•ØªÛ•ÚµÛŒ Ú©ÙˆØ±Ø¯ÛŒ Ø¨Ø¨ÛŒÙ†ÛŒØª Ùˆ ÛŒØ§Ø±ÛŒ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ Ø¨Ú©Û•ÛŒØª.
        </div>
      </div>
    </section>

    <!-- MATAL PAGE -->
    <section class="page" id="page-matal">
      <div class="pageTitle">Ù…Û•ØªÛ•Úµ</div>

      <div class="hero">
        <div class="heroTop">
          <div>
            <p class="heroTitle">Ù…Û•ØªÛ•ÚµÛŒ Ú©ÙˆØ±Ø¯ÛŒ â€” ÙˆØ´Û•ÛŒ Ú©ÙˆØ±ØªØŒ ÙˆØ§ØªØ§ÛŒ Ø¯Ø±ÛÚ˜</p>
            <p class="heroDesc">
              Ù„ÛØ±Û•Ø¯Ø§ Ø¯Û•ØªÙˆØ§Ù†ÛŒØª Ø¨Û• Ø¦Ø§Ø³Ø§Ù†ÛŒØ¯Ø§ Ù…Û•ØªÛ•Úµ Ø¨Ø¯Û†Ø²ÛŒØªÛ•ÙˆÛ•ØŒ Ø¨Ú¯Û•Ú•ÛÛŒØªØŒ Ùˆ Ù…Û•ØªÛ•ÚµÛ•Ú©Û• Ú©Û†Ù¾ÛŒ Ø¨Ú©Û•ÛŒØª.
              Ù‡Û•ÙˆÚµ Ø¯Û•Ø¯Û•ÛŒÙ† Ú•ÛØ²Ù…Ø§Ù† Ùˆ Ù†ÙˆÙˆØ³ÛŒÙ†ÛŒ Ú©ÙˆØ±Ø¯ÛŒ Ø¬ÙˆØ§Ù† Ùˆ Ú•ÙˆÙˆÙ† Ø¨Û•Ú©Ø§Ø±Ø¨Ù‡ÛÙ†ÛŒÙ†.
            </p>
          </div>
          <div class="heroIcon"><i class="fa-solid fa-scroll"></i></div>
        </div>

        <div style="margin-top:14px">
          <div class="searchBar">
            <i class="fa-solid fa-magnifying-glass"></i>
            <input id="q" type="text" placeholder="Ú¯Û•Ú•Ø§Ù†: Ù†Ø§ÙˆÙ†ÛŒØ´Ø§Ù†ØŒ Ø¯Û•Ù‚ØŒ ÛŒØ§Ù† ÙˆØ´Û•..." autocomplete="off">
          </div>

          <div class="chips" id="chips"></div>

          <div class="hint" id="resultsHint"></div>
        </div>
      </div>

      <div class="section" style="border-top:none; padding-top:0; margin-top:14px">
        <div class="sectionHead">
          <div class="left">
            <i class="fa-solid fa-crown"></i>
            <span>Ù„ÛŒØ³ØªÛŒ Ù…Û•ØªÛ•Úµ</span>
          </div>
          <button class="miniBtn" onclick="shuffleMatal()"><i class="fa-solid fa-shuffle"></i> ØªÛÚ©Û•Úµ</button>
        </div>

        <div class="matalWrap" id="matalGrid"></div>
      </div>
    </section>

    <!-- QUIZ PAGE -->
    <section class="page" id="page-quiz">
      <div class="pageTitle">ÛŒØ§Ø±ÛŒ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ</div>

      <div class="hero purple">
        <div class="heroTop">
          <div>
            <p class="heroTitle">ÛŒØ§Ø±ÛŒ Ù‡Û•ÚµØ¨Ú˜Ø§Ø±Ø¯Ù† â€” Ù…ÛØ´Ú©Øª ØªØ§Ù‚ÛŒ Ø¨Ú©Û•Ø±Û•ÙˆÛ•!</p>
            <p class="heroDesc">
              Ù¾Ø±Ø³ÛŒØ§Ø±Û• Ù‚ÙˆÙˆÚµÛ•Ú©Ø§Ù† ÙˆÛ•ÚµØ§Ù… Ø¨Ø¯Û•Ø±Û•ÙˆÛ• Ùˆ Ø¦Ø§Ø³Øª Ø¨Û• Ø¦Ø§Ø³Øª Ø®Ø§Úµ Ú©Û†Ø¨Ú©Û•Ø±Û•ÙˆÛ•.
              Ù‡Û•Ø± Ø¦Ø§Ø³ØªÛÚ© Ø³Û•Ø®ØªØªØ± Ø¯Û•Ø¨ÛØª!
            </p>
          </div>
          <div class="heroIcon"><i class="fa-solid fa-brain"></i></div>
        </div>

        <div class="quizStats">
          <div class="statBox">
            <div class="statValue" id="statLevel">1</div>
            <div class="statLabel">Ø¦Ø§Ø³Øª</div>
          </div>
          <div class="statBox">
            <div class="statValue" id="statXP">0</div>
            <div class="statLabel">Ø®Ø§Úµ</div>
          </div>
          <div class="statBox">
            <div class="statValue" id="statCorrect">0</div>
            <div class="statLabel">Ú•Ø§Ø³Øª</div>
          </div>
        </div>
      </div>

      <div id="quizContainer"></div>
    </section>

    <!-- LEADERBOARD PAGE -->
    <section class="page" id="page-leaderboard">
      <div class="pageTitle">Ù¾Ù„Û•Ø¨Û•Ù†Ø¯ÛŒ</div>

      <div class="hero golden">
        <div class="heroTop">
          <div>
            <p class="heroTitle">Ù¾Ù„Û•Ø¨Û•Ù†Ø¯ÛŒ ÛŒØ§Ø±ÛŒØ²Ø§Ù†Û•Ú©Ø§Ù†</p>
            <p class="heroDesc">
              Ù„ÛŒØ³ØªÛŒ Ø³Û•Ø±Û•ÙˆÛ•ÛŒ ÛŒØ§Ø±ÛŒØ²Ø§Ù†Û•Ú©Ø§Ù† Ø¨Û•Ù¾ÛÛŒ Ú˜Ù…Ø§Ø±Û•ÛŒ ÙˆÛ•ÚµØ§Ù…ÛŒ Ú•Ø§Ø³Øª.
              ÛŒØ§Ø±ÛŒ Ø¨Ú©Û• Ùˆ Ø¨Ú†Û† Ø³Û•Ø±Û•ÙˆÛ•ÛŒ Ù„ÛŒØ³ØªÛ•Ú©Û•!
            </p>
          </div>
          <div class="heroIcon"><i class="fa-solid fa-trophy"></i></div>
        </div>
      </div>

      <div class="section" style="border-top:none; padding-top:0; margin-top:14px">
        <div class="sectionHead">
          <div class="left">
            <i class="fa-solid fa-ranking-star"></i>
            <span>Ø³Û•Ø±Û•ÙˆÛ•ÛŒ Ù¡Ù </span>
          </div>
          <button class="miniBtn" onclick="loadLeaderboard()"><i class="fa-solid fa-refresh"></i> Ù†ÙˆÛÚ©Ø±Ø¯Ù†Û•ÙˆÛ•</button>
        </div>

        <div class="leaderList" id="leaderList">
          <div class="leaderLoading">
            <i class="fa-solid fa-spinner fa-spin"></i> Ú†Ø§ÙˆÛ•Ú•ÙˆØ§Ù† Ø¨Û•...
          </div>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section class="page" id="page-about">
      <div class="pageTitle">Ø¯Û•Ø±Ø¨Ø§Ø±Û•</div>

      <div class="section">
        <div class="sectionHead">
          <div class="left">
            <i class="fa-solid fa-circle-info"></i>
            <span>AriGaming</span>
          </div>
        </div>

        <div style="padding:14px;border-radius:22px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.10);box-shadow:var(--shadow);line-height:2.0">
          <div style="font-weight:1000;font-size:16px;margin-bottom:6px">Ù¾Û•Ú•Û•ÛŒ Ù…Û•ØªÛ•Úµ Ùˆ ÛŒØ§Ø±ÛŒ</div>
          <div style="color:rgba(233,238,252,.78);font-weight:750">
            Ø¦Û•Ù… ÙˆÛØ¨Ø³Ø§ÛŒØªÛ• Ø¨Û† Ù…Û•ØªÛ•ÚµÛŒ Ú©ÙˆØ±Ø¯ÛŒ Ùˆ ÛŒØ§Ø±ÛŒ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø§ÙˆÛ•.
            Ø¯Û•ØªÙˆØ§Ù†ÛŒØª Ù…Û•ØªÛ•ÚµÛ•Ú©Ø§Ù† Ø¨Û• Ù¾Û†Ù„ (Category) Ø¨Ø¨ÛŒÙ†ÛŒØª Ùˆ Ø¨Û• Ú¯Û•Ú•Ø§Ù† Ø¯Û†Ø²ÛŒØ§Ù†Û•ÙˆÛ•.
            Ù‡Û•Ø±ÙˆÛ•Ù‡Ø§ Ø¯Û•ØªÙˆØ§Ù†ÛŒØª ÛŒØ§Ø±ÛŒ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ Ø¨Ú©Û•ÛŒØª Ùˆ Ø®Ø§Úµ Ú©Û†Ø¨Ú©Û•ÛŒØªÛ•ÙˆÛ•!
          </div>
        </div>
      </div>
    </section>

  </div>

  <!-- Bottom Nav -->
  <nav class="nav">
    <div class="navRow">
      <button class="navBtn active" data-go="home" title="Home"><i class="fa-solid fa-house"></i></button>
      <button class="navBtn" data-go="matal" title="Matal"><i class="fa-solid fa-scroll"></i></button>
      <button class="navBtn" data-go="quiz" title="Quiz"><i class="fa-solid fa-gamepad"></i></button>
      <button class="navBtn" data-go="leaderboard" title="Leaderboard"><i class="fa-solid fa-trophy"></i></button>
      <button class="navBtn" data-go="about" title="About"><i class="fa-regular fa-user"></i></button>
    </div>
  </nav>

  <!-- Matal Modal -->
  <div class="modal" id="modal" onclick="closeModal(event)">
    <div class="sheet" onclick="event.stopPropagation()">
      <div class="sheetHead">
        <strong id="mTitle">Ù…Û•ØªÛ•Úµ</strong>
        <button class="closeBtn" onclick="closeModal()"><i class="fa-solid fa-xmark"></i></button>
      </div>
      <div class="sheetBody" id="mBody"></div>
    </div>
  </div>

  <!-- Auth Modal -->
  <div class="authOverlay" id="authOverlay" onclick="hideAuth(event)">
    <div class="authCard" onclick="event.stopPropagation()">
      <div class="authTitle">Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•</div>
      <div class="authDesc">Ø¨Û† Ù¾Ø§Ø´Û•Ú©Û•ÙˆØªÚ©Ø±Ø¯Ù†ÛŒ Ø¦Ø§Ø³Øª Ùˆ Ø®Ø§ÚµÛ•Ú©Ø§Ù†ØªØŒ Ø¨Û• Ú¯ÙˆÙˆÚ¯Úµ Ø¨Ú†Û†Ø±Û• Ú˜ÙˆÙˆØ±Û•ÙˆÛ•</div>

      <div class="authError" id="authError"></div>

      <button class="googleBtn" id="googleBtn" onclick="handleGoogleLogin()">
        <svg viewBox="0 0 24 24">
          <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
          <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
          <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
          <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
        </svg>
        Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ• Ø¨Û• Ú¯ÙˆÙˆÚ¯Úµ
      </button>

      <div class="authClose">
        <button onclick="hideAuth()">Ø¯Ø§Ø®Ø³ØªÙ†</button>
      </div>
    </div>
  </div>

  <script>
    // =========================================
    // Firebase Setup
    // =========================================
    const firebaseConfig = {
      apiKey: "AIzaSyDHCKiu7ezBSlE_aIFhDyiWTYHQRz-gM1k",
      authDomain: "maskan-8592c.firebaseapp.com",
      projectId: "maskan-8592c",
      storageBucket: "maskan-8592c.firebasestorage.app",
      messagingSenderId: "262615187618",
      appId: "1:262615187618:web:0e719234a43421f6d057fb",
      measurementId: "G-6SVX5LVP6B"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    const googleProvider = new firebase.auth.GoogleAuthProvider();

    // =========================================
    // DATA â€” Ù…Û•ØªÛ•Úµ
    // =========================================
    const matal = [
      { id:"m1",  emoji:"ğŸ˜”", title:"Ù‡Û•Ù„ÛŒ Ú©Û†Ù…ÛŒØ¯ÛŒ", cat:"Ø®Û•Ù…", text:"Ù‡Û•Ù†Ø¯Û Ø¬Ø§Ø± Ø®Û•Ù†Ø¯Û• Ø¯Û•Ø¨ÛØªÛ• Ù‚Ø§Ù¾ÛŒÛ•Ú©ÛŒ Ø¨Û† Ø®Û•Ù…Ø› Ø¨Û•ÚµØ§Ù… Ø®Û•Ù…ÛŒØ´ Ù‡Û•Ù…ÛŒØ´Û• Ù†Û•Ù…ÛÙ†ÛØª.", views: 1280 },
      { id:"m2",  emoji:"ğŸ§ ", title:"Ù…ÛØ´Ú© Ùˆ Ù‚Ø³Û•", cat:"Ú˜ÛŒØ§Ù†", text:"Ú©Û•Ø³ÛÚ© Ø¨Û• Ù…ÛØ´Ú© Ø¯Û•Ø¨ÛØªÛ• Ø³Û•Ø±ÙˆÛ•Ø±ÛŒ Ø®Û†ÛŒØŒ Ù†Û• Ø¨Û• Ø¯Û•Ù†Ú¯ Ùˆ Ù‚Ø³Û•ÛŒ Ø²Û†Ø±.", views: 980 },
      { id:"m3",  emoji:"â³", title:"Ú©Ø§Øª", cat:"Ú˜ÛŒØ§Ù†", text:"Ú©Ø§Øª Ø¦Û•Ùˆ Ø´ØªÛ•ÛŒÛ• Ú©Û• Ù‡Û•Ø± Ø¯Û•Ú†ÛØªØŒ Ù¾Ø§Ø´Ù…Ø§Ù†ÛŒØ´ Ù¾ÛÛŒ Ø¯Û•Ú†ÛØªØ› Ø¦Û•Ù…Û•ÛŒ Ù‡Û•ÛŒÛ• Ø¦Û•Ù…Ú•Û†ÛŒÛ•.", views: 1520 },
      { id:"m4",  emoji:"ğŸ«¶", title:"Ù‡Ø§ÙˆÚ•Û", cat:"Ù‡Ø§ÙˆÚ•ÛØªÛŒ", text:"Ù‡Ø§ÙˆÚ•Û Ø¦Û•ÙˆÛ• Ù†ÛŒÛ• Ú©Û• Ù‡Û•Ù…ÛŒØ´Û• Ù„Û•Ú¯Û•ÚµØª Ø¨ÛØªØ› Ù‡Ø§ÙˆÚ•Û Ø¦Û•ÙˆÛ•ÛŒÛ• Ú©Û• Ú©Ø§ØªÛÚ© Ù‡Û•Ù…ÙˆÙˆØ§Ù† Ø¯Û•Ú†Ù†ØŒ Ø¦Û•Ùˆ Ø¯Û•ÙˆÛØ³ØªÛØª.", views: 2100 },
      { id:"m5",  emoji:"ğŸ”¥", title:"Ø¯Û•Ø³ØªÚ©Û•ÙˆØª", cat:"Ú©Ø§Ø±", text:"Ù‡Û•ÙˆÚµ Ù†Û•Ú©Û•ÛŒØªØŒ Ø¨Û• Ø¯ÚµÛÚ©ÛŒ Ú¯Û•ÙˆØ±Û•Ø´ Ù†Ø§Ú¯Û•ÛŒØªØ› Ø¨Û• Ù‡Û•ÙˆÚµÛŒ Ú©Û•Ù…ØŒ Ø¯Û•Ø³ØªÚ©Û•ÙˆØªÛŒ Ú©Û•Ù…ÛŒØ´ Ø¯ÛØª.", views: 760 },
      { id:"m6",  emoji:"ğŸŒ§ï¸", title:"Ø¦Ø§Ø²Ø§Ø±", cat:"Ú˜ÛŒØ§Ù†", text:"Ø¦Ø§Ø²Ø§Ø± Ùˆ Ø¨Û†Ø±Ø§Ù† Ù‡Û•Ø±ÙˆÛ•Ú© Ø¨Ø§Ø±Ø§Ù†Û•Ø› Ø¨Û•ÚµØ§Ù… Ø¯ÙˆØ§ÛŒ Ø¨Ø§Ø±Ø§Ù† Ù‡Û•Ù…ÛŒØ´Û• Ø¦Ø§Ø³Ù…Ø§Ù† Ú•ÙˆÙˆÙ† Ø¯Û•Ø¨ÛØª.", views: 1330 },
      { id:"m7",  emoji:"ğŸ¦…", title:"Ø¨Û•Ø±Ø²Ø¨ÙˆÙˆÙ†", cat:"Ù‡Û•ÙˆÚµ", text:"Ø¦Û•Ú¯Û•Ø± Ø¯Û•ØªÛ•ÙˆÛØª Ø¨Û•Ø±Ø² Ø¨Ø¨ÛŒØªØŒ Ø³Û•ÛŒØ±ÛŒ Ø¨Ø§Ù„Û•Ú©Ø§Ù†Øª Ø¨Ú©Û•Ø› Ù†Û• Ø³Û•ÛŒØ±ÛŒ Ø³Ø§ÛŒÛ•ÛŒ Ø®Û†Øª.", views: 890 },
      { id:"m8",  emoji:"ğŸ¤", title:"Ø¦ÛÙˆÛ• Ùˆ Ø®Û†ØªØ§Ù†", cat:"Ú•Û•ÙˆØ´", text:"Ø®Û†Øª Ú•ÛØ² Ø¨Ø¯Û•Ø› Ú©Û• Ø®Û†Øª Ú•ÛØ² Ù†Û•Ø¯Û•ÛŒØªØŒ Ú†Ø§ÙˆÛ•Ú•ÛÛŒ Ú•ÛØ²ÛŒ Ø®Û•ÚµÚ© Ù…Û•Ú©Û•.", views: 1710 },
      { id:"m9",  emoji:"ğŸ‘€", title:"Ø¨ÛŒÙ†ÛŒÙ†", cat:"Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ", text:"Ù‡Û•Ù†Ø¯Û Ø´Øª Ø¨Û• Ú†Ø§ÙˆØª Ø¯Û•Ø¨ÛŒÙ†ÛŒØªØŒ Ø¨Û•ÚµØ§Ù… Ø¨Û• ØªÛÚ¯Û•ÛŒØ´ØªÙ† Ø¯Û•Ø²Ø§Ù†ÛŒØª. Ú†Ø§ÙˆÛŒ Ø¯Úµ Ú¯Û•ÙˆØ±Û•ØªØ±Û•.", views: 640 },
      { id:"m10", emoji:"ğŸ§Š", title:"Ù‡ÛÙˆØ§Ø´ÛŒ", cat:"Ú•Û•ÙˆØ´", text:"Ù‡ÛÙˆØ§Ø´ÛŒ Ù‡ÛØ²ÛŒÛ•Ø› Ú©Û•Ø³ÛÚ© Ú©Û• Ù‡ÛÙˆØ§Ø´Û•ØŒ Ø²Û†Ø±Ø¬Ø§Ø± Ø¨Û•Ø±Û•ÙˆÙ¾ÛØ´ Ø¯Û•Ú†ÛØª Ø¨Û• Ø¯ÚµÙ†ÛŒØ§ÛŒÛŒ.", views: 1210 },
      { id:"m11", emoji:"âš–ï¸", title:"Ø¯Ø§Ø¯Ù¾Û•Ø±ÙˆÛ•Ø±ÛŒ", cat:"Ú©Û†Ù…Û•ÚµÚ¯Ø§", text:"Ø¯Ø§Ø¯Ù¾Û•Ø±ÙˆÛ•Ø±ÛŒ Ù„Û• Ù‚Ø³Û•Ø¯Ø§ Ù†ÛŒÛ•Ø› Ù„Û• Ú©Ø±Ø¯Ø§Ø±Ø¯Ø§ Ø¯Û•Ø±Ø¯Û•Ú©Û•ÙˆÛØª. Ú©Ø±Ø¯Ø§Ø±Øª Ù‚Ø³Û•ÛŒ ØªÛ†ÛŒÛ•.", views: 830 },
      { id:"m12", emoji:"ğŸŒ™", title:"Ø¦ÙˆÙ…ÛØ¯", cat:"Ø¦ÙˆÙ…ÛØ¯", text:"Ø¦ÙˆÙ…ÛØ¯ ÙˆÛ•Ú© Ù…Ø§Ù†Ú¯ ÙˆØ§ÛŒÛ•Ø› Ø¬Ø§Ø±Û Ø¯Û•Ø±Ø¯Û•Ú©Û•ÙˆÛØªØŒ Ø¬Ø§Ø±Û Ø´Ø§Ø±Ø¯Û•Ø¨ÛØªØŒ Ø¨Û•ÚµØ§Ù… Ù†Ø§Ø¨ÛØª.", views: 1980 },
      { id:"m13", emoji:"ğŸª", title:"Ø®Û†Ø¨ÛŒÙ†ÛŒÙ†", cat:"Ú•Û•ÙˆØ´", text:"Ø¦Û•Ú¯Û•Ø± Ù‡Û•ÚµÛ•ÛŒ Ø®Û†Øª Ù†Û•Ø¨ÛŒÙ†ÛŒØªØŒ Ù‡Û•ÚµÛ•ÛŒ Ú©Û•Ø³ÛÚ©ÛŒ ØªØ± Ø²Û†Ø± Ø¨Û• Ø¯ÚµØª Ø¯Û•Ú†ÛØª.", views: 720 },
      { id:"m14", emoji:"ğŸª´", title:"Ú¯Û•Ø´Û•Ú©Ø±Ø¯Ù†", cat:"Ù‡Û•ÙˆÚµ", text:"Ú¯Û•Ø´Û•Ú©Ø±Ø¯Ù† Ø¨Û• Ù‡Û•Ù†Ú¯Ø§ÙˆÛ• Ø¨Ú†ÙˆÙˆÚ©Û•Ú©Ø§Ù† Ø¯Û•Ø³Øª Ù¾Û Ø¯Û•Ú©Ø§ØªØ› Ø¨Û•ÚµØ§Ù… Ø¨Û•Ø±Ø¯Û•ÙˆØ§Ù…ÛŒ Ø¯Û•ÙˆÛØª.", views: 1100 },
      { id:"m15", emoji:"ğŸ“Œ", title:"ÙˆØ´Û•", cat:"Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ", text:"ÙˆØ´Û•ÛŒ Ø¬ÙˆØ§Ù† Ø¯Úµ Ø¯Û•Ú¯Ø±ÛØªØŒ Ø¨Û•ÚµØ§Ù… Ú©Ø±Ø¯Ø§Ø± Ø¯Úµ Ø¯Û•Ø¨Ø§Øª. ÙˆØ´Û• Ø¨ÚµÛØŒ Ø¨Û• Ú©Ø±Ø¯Ø§Ø± Ù¾Ø´ØªÚ¯ÛŒØ±ÛŒ Ø¨Ú©Û•.", views: 940 },
      { id:"m16", emoji:"ğŸ§±", title:"Ø¨Ù†ÛŒØ§Øª", cat:"Ú©Ø§Ø±", text:"Ø¦Û•ÙˆÛ•ÛŒ Ø¨Û• Ø®Ø´ØªÛ• Ø®Ø´Øª Ø¨Ù†ÛŒØ§ØªÛŒ Ø¯Û•Ú©Ø§ØªØŒ Ù‡Û•Ø± Ø¦Û•ÙˆÛ•ÛŒÛ• Ú©Û• Ù†Ø§Ú•ÙˆÙˆØ®ÛØª Ù„Û• ÛŒÛ•Ú© Ù‡Û•Ù†Ú¯Ø§Ùˆ.", views: 510 },
      { id:"m17", emoji:"ğŸš¶â€â™‚ï¸", title:"Ú•ÛÚ¯Ø§", cat:"Ú˜ÛŒØ§Ù†", text:"Ú•ÛÚ¯Ø§ Ø¨Û• Ù…Û•ÙˆØ¯Ø§ Ù†ÛŒÛ•Ø› Ø¨Û• Ø¦Û•Ø±Ø§Ø¯Û•ÛŒÛ•. Ø¦Û•Ú¯Û•Ø± Ø¨Û•Ø±Ø¯Û•ÙˆØ§Ù… Ø¨ÛŒØªØŒ Ú¯Û•ÛŒØ´ØªÙ† Ù†Ø²ÛŒÚ© Ø¯Û•Ø¨ÛØª.", views: 1400 },
      { id:"m18", emoji:"ğŸ¤", title:"ÛŒØ§Ø±Ù…Û•ØªÛŒ", cat:"Ú©Û†Ù…Û•ÚµÚ¯Ø§", text:"ÛŒØ§Ø±Ù…Û•ØªÛŒ Ú©Ø±Ø¯Ù† Ø¨Û• Ú©Û•Ø³ÛÚ©ØŒ Ú©Û•Ù…Ú©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ø¨Ø§Ø±Û•Ú©Û•ÛŒÛ•Ø› Ù†Û• Ú¯Ø±ØªÙ†Û•ÙˆÛ•ÛŒ Ø¯Û•Ø³ØªÛ•Ú©Û•ÛŒ.", views: 860 },
      { id:"m19", emoji:"ğŸ•¯ï¸", title:"Ú•ÙˆÙˆÙ†Ø§Ú©ÛŒ", cat:"Ø¦ÙˆÙ…ÛØ¯", text:"ÛŒÛ•Ú© Ø´Û•Ù…Û• Ú•ÙˆÙˆÙ†Ø§Ú©ÛŒ Ø¯Û•Ú©Ø§ØªØ› Ø¨Û•ÚµØ§Ù… Ù‡Û•Ø²Ø§Ø± Ø´Û•Ù…Û• ØªØ§Ø±ÛŒÚ©ÛŒ Ù†Ø§Ú¯Û•Ú•ÛÙ†ÛØªÛ•ÙˆÛ•.", views: 2300 },
      { id:"m20", emoji:"ğŸ“š", title:"ÙÛØ±Ø¨ÙˆÙˆÙ†", cat:"Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ", text:"ÙÛØ±Ø¨ÙˆÙˆÙ† Ú©Û†ØªØ§ÛŒÛŒ Ù†ÛŒÛ•Ø› Ù‡Û•Ø± Ú•Û†Ú˜ÛÚ© Ø¯Û•ØªÙˆØ§Ù†ÛŒØª Ø¨Ø§Ø´ØªØ± Ø¨Ø¨ÛŒØªØŒ Ø¦Û•Ú¯Û•Ø± Ø¯ÚµØª Ø¨Ø®ÙˆØ§Ø²ÛØª.", views: 1020 },
    ];

    // =========================================
    // Quiz Questions - Organized by Level
    // =========================================
    const quizQuestions = {
      1: [
        { q: "Ú©ÙˆØ±Ø¯Ø³ØªØ§Ù† Ù„Û• Ú†Û•Ù†Ø¯ Ù¾Ø§Ø±Ú†Û•ÙˆÛ• Ù¾ÛÚ©Ù‡Ø§ØªÙˆÙˆÛ•ØŸ", opts: ["Ø¯ÙˆÙˆ Ù¾Ø§Ø±Ú†Û•", "Ø³Û Ù¾Ø§Ø±Ú†Û•", "Ú†ÙˆØ§Ø± Ù¾Ø§Ø±Ú†Û•", "Ù¾ÛÙ†Ø¬ Ù¾Ø§Ø±Ú†Û•"], correct: 2 },
        { q: "Ø²Ù…Ø§Ù†ÛŒ Ú©ÙˆØ±Ø¯ÛŒ Ú†Û•Ù†Ø¯ Ø´ÛÙˆÛ•Ø²Ø§Ø±ÛŒ Ø³Û•Ø±Û•Ú©ÛŒ Ù‡Û•ÛŒÛ•ØŸ", opts: ["Ø¯ÙˆÙˆ", "Ø³Û", "Ú†ÙˆØ§Ø±", "Ù¾ÛÙ†Ø¬"], correct: 2 },
        { q: "Ø´Ø§Ø±ÛŒ Ù‡Û•ÙˆÙ„ÛØ± Ø¨Û• Ú†ÛŒ Ù†Ø§Ø³Ø±Ø§ÙˆÛ•ØŸ", opts: ["Ù¾Ø§ÛŒØªÛ•Ø®ØªÛŒ Ú©ÙˆØ±Ø¯Ø³ØªØ§Ù†", "Ø´Ø§Ø±ÛŒ Ú¯ÙˆÚµ", "Ø´Ø§Ø±ÛŒ Ú©ÙˆØ±Ø¯", "Ø´Ø§Ø±ÛŒ Ø®Û†Ø±"], correct: 0 },
        { q: "Ú©ÙˆØ±Ø¯Û•Ú©Ø§Ù† Ø¨Û• Ú†ÛŒ Ù†Ø§Ø³Ø±Ø§ÙˆÙ† Ù„Û• Ù…ÛÚ˜ÙˆÙˆØ¯Ø§ØŸ", opts: ["Ø¨Ø§Ø²Ø±Ú¯Ø§Ù†ÛŒ", "Ø¦Ø§Ø²Ø§Ø®ÙˆØ§Ø²ÛŒ", "Ø¯Û•Ø±ÛŒØ§Ú†ÙˆØ§Ù†ÛŒ", "Ú†Ø§Ù†Ø¯Ù†Û•ÙˆØ§Ù†ÛŒ"], correct: 1 },
        { q: "Ù†Û•ÙˆØ±Û†Ø² Ú† Ú•Û†Ú˜ÛÚ©Û•ØŸ", opts: ["Ù¢Ù¡ÛŒ Ø¦Ø§Ø²Ø§Ø±", "Ù¢Ù¡ÛŒ Ù†ÛŒØ³Ø§Ù†", "Ù¢Ù¡ÛŒ Ú¯ÙˆÚµØ§Ù†", "Ù¢Ù¡ÛŒ Ø®Û•Ø²Û•ÚµÙˆÛ•Ø±"], correct: 0 },
      ],
      2: [
        { q: "ÙÛ•ÛŒÙ„Û•Ø³ÙˆÙˆÙÛŒ ÛŒÛ†Ù†Ø§Ù†ÛŒ Ø³Û†Ú©Ø±Ø§Øª Ø¨Û• Ú†ÛŒ Ú©ÙˆØ´ØªØ±Ø§ØŸ", opts: ["Ø´Ù…Ø´ÛØ±", "Ú˜Û•Ù‡Ø±", "Ù„Û•Ø³ÛØ¯Ø§Ø±Ø¯Ø§Ù†", "Ø¨Ø±ÛŒÙ†Ø¯Ø§Ø± Ú©Ø±Ø¯Ù†"], correct: 1 },
        { q: "Ø¦Ø§ÛŒØ§ Ø²Û•ÙˆÛŒ Ø¯Û•ÙˆØ±ÛŒ Ø®Û†Ø± Ø¯Û•Ø®Ø§Øª ÛŒØ§Ù† Ø®Û†Ø± Ø¯Û•ÙˆØ±ÛŒ Ø²Û•ÙˆÛŒ?", opts: ["Ø²Û•ÙˆÛŒ Ø¯Û•ÙˆØ±ÛŒ Ø®Û†Ø±", "Ø®Û†Ø± Ø¯Û•ÙˆØ±ÛŒ Ø²Û•ÙˆÛŒ", "Ù‡Û•Ø±Ø¯ÙˆÙˆÚ©ÛŒØ§Ù† Ú•Ø§Ø³ØªÙ†", "Ù‡ÛŒÚ†ÛŒØ§Ù†"], correct: 0 },
        { q: "Ú©Û ÛŒÛ•Ú©Û•Ù…ÛŒÙ† Ú©Û•Ø³ Ø¨ÙˆÙˆ Ú©Û• Ù¾ÛÛŒ Ù„Û• Ù…Ø§Ù†Ú¯ Ø¯Ø§Ù†Ø§ØŸ", opts: ["Ù†ÛŒÙ„ Ø¦Ø§Ø±Ù…Ø³ØªØ±Û†Ù†Ú¯", "Ø¨Ø§Ø² Ø¦Û†ÚµØ¯Ø±ÛŒÙ†", "ÛŒÙˆØ±ÛŒ Ú¯Ø§Ú¯Ø§Ø±ÛŒÙ†", "Ø¦Ø§Ù„Ø§Ù† Ø´ÛÙ¾Ø§Ø±Ø¯"], correct: 0 },
        { q: "Ù…Ø±Û†Ú¤ Ú†Û•Ù†Ø¯ Ù‡Û•Ø³ØªÙˆÙˆÚ©Û•ÛŒ Ù‡Û•ÛŒÛ• Ù„Û• Ù„Û•Ø´ÛŒØ¯Ø§ØŸ", opts: ["Ù¡Ù¥Ù ", "Ù¢Ù Ù¦", "Ù£Ù Ù ", "Ù¤Ù Ù "], correct: 1 },
        { q: "ÛŒÛ•Ú©Û•Ù…ÛŒÙ† Ø´Û•Ú•ÛŒ Ø¬ÛŒÙ‡Ø§Ù†ÛŒ Ù„Û• Ú† Ø³Ø§ÚµÛÚ©Ø¯Ø§ Ø¯Û•Ø³ØªÛŒ Ù¾ÛÚ©Ø±Ø¯ØŸ", opts: ["Ù¡Ù©Ù¡Ù¢", "Ù¡Ù©Ù¡Ù¤", "Ù¡Ù©Ù¡Ù¨", "Ù¡Ù©Ù¢Ù "], correct: 1 },
      ],
      3: [
        { q: "ÙˆØ§ØªØ§ÛŒ ÙÛ•Ù„Ø³Û•ÙÛ• Ú†ÛŒÛŒÛ• Ø¨Û• Ø²Ø§Ø±Ø§ÙˆÛ•ÛŒ ÛŒÛ†Ù†Ø§Ù†ÛŒ?", opts: ["Ø­ÙˆØ¨ÛŒ Ø¯Ø§Ù†Ø§ÛŒÛŒ", "Ø­ÙˆØ¨ÛŒ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ", "Ù„ÛÚ©Û†ÚµÛŒÙ†Û•ÙˆÛ•", "ØªÛÚ¯Û•ÛŒØ´ØªÙ†"], correct: 0 },
        { q: "Ú©Û Ø¨ÛŒØ±Ø¯Û†Ø²ÛŒ Â«Ø¦ÛÙ…Û• Ù„Û•ÙˆÛ•Ø¯Ø§ Ø¯Û•Ú˜ÛŒÙ† Ú©Û• Ø¯Û•ÛŒØ¨ÛŒÙ†ÛŒÙ†Â» Ø¯Ø§Ù†Ø§?", opts: ["Ø³Û†Ú©Ø±Ø§Øª", "Ø¦Û•ÙÚµØ§ØªÙˆÙ†", "Ø¦Û•Ø±Û•Ø³ØªÛ†", "Ú©Ø§Ù†Øª"], correct: 1 },
        { q: "ØªÛŒÛ†Ø±ÛŒ Ú•ÛŒÙ„Ø§ØªÛŒÚ¤ÛŒØªÛŒ Ú©Û Ø¯Ø§ÛŒÙ†Ø§ÙˆÛ•?", opts: ["Ù†ÛŒÙˆØªÙ†", "Ø¦Ø§ÛŒÙ†Ø´ØªØ§ÛŒÙ†", "Ù‡Û†Ú©ÛŒÙ†Ú¯", "Ø¨Û†Ø±"], correct: 1 },
        { q: "Ù…Ø±Û†Ú¤ Ú† Ù„Ø§ÛŒÛ•Ù†ÛÚ©ÛŒ Ù…ÛØ´Ú©ÛŒ Ø¨Û•Ú©Ø§Ø±Ø¯Û•Ù‡ÛÙ†ÛØª Ø¨Û† Ø²Ù…Ø§Ù†ØŸ", opts: ["Ù„Ø§ÛŒ Ú•Ø§Ø³Øª", "Ù„Ø§ÛŒ Ú†Û•Ù¾", "Ù‡Û•Ø±Ø¯ÙˆÙˆ Ù„Ø§", "Ù†Ø§ÙˆÛ•Ú•Ø§Ø³Øª"], correct: 1 },
        { q: "ÙˆØ§ØªØ§ÛŒ Â«Ú©Û†Ú¯Ù†ÛŒØªÛŒÚ¤Â» Ú†ÛŒÛŒÛ•ØŸ", opts: ["Ù‡Û•Ø³ØªÛŒ", "Ø¯Û•Ø±Ú©ÛŒ/Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ", "Ú©Û†Ù…Û•ÚµØ§ÛŒÛ•ØªÛŒ", "Ø¬Û•Ø³ØªÛ•ÛŒÛŒ"], correct: 1 },
      ],
      4: [
        { q: "Ù¾Ø§Ø±Ø§Ø¯Ø§Ú©Ø³ÛŒ Ø´Ø±Û†Ø¯ÛŒÙ†Ú¯Û•Ø± Ø³Û•Ø¨Ø§Ø±Û•Øª Ø¨Û• Ú†ÛŒÛŒÛ•ØŸ", opts: ["Ú©Ø§Øª", "ÙÛŒØ²ÛŒÚ©ÛŒ Ú©ÙˆØ§Ù†ØªÛ†Ù…", "Ø¦Ø§Ø¨ÙˆÙˆØ±ÛŒ", "Ú©Û†Ù…Û•ÚµÙ†Ø§Ø³ÛŒ"], correct: 1 },
        { q: "Â«Ú©Û†Ú¯ÛŒØªÛ† Ø¦ÛØ±Ú¯Û† Ø³Û†Ù…Â» ÙˆØ§ØªÛ• Ú†ÛŒØŸ", opts: ["Ø¯Û•Ø¨ÛŒØ±Ù…ØŒ Ø¨Û†ÛŒÛ• Ù‡Û•Ù…", "Ø¯Û•Ø¨ÛŒÙ†Ù…ØŒ Ø¨Û†ÛŒÛ• Ù‡Û•Ù…", "Ù‡Û•Ø³ØªÙ… Ù¾Û Ø¯Û•Ú©Ø§ØªØŒ Ø¨Û†ÛŒÛ• Ù‡Û•Ù…", "Ø¯Û•Ø²Ø§Ù†Ù…ØŒ Ø¨Û†ÛŒÛ• Ù‡Û•Ù…"], correct: 0 },
        { q: "Ú©Û Ø¨ÛŒØ±Ø¯Û†Ø²ÛŒ Â«Ø¦Û•Ø³ÛŒØ±ÛŒ ØªØ§Ù„Ø§Ù†ÛŒÂ» Ø¯Ø§ÛŒÙ†Ø§ÙˆÛ•?", opts: ["Ú•Û†Ø³Û†", "Ù‡Û†Ø¨Ø²", "Ù„Û†Ú©", "Ù…Û†Ù†ØªÛ•Ø³Ú©ÛŒÙˆ"], correct: 1 },
        { q: "ØªÛŒÛ†Ø±ÛŒ Â«Ø³ÙˆÙ¾Û•Ø±Ø³ØªØ±ÛŒÛŒÙ†Ú¯Â» Ú†Û•Ù†Ø¯ÛŒÙ† Ú•Û•Ù‡Û•Ù†Ø¯ Ø¯Û•Ø®Ø§ØªÛ•Ú•ÙˆÙˆ?", opts: ["Ù¤", "Ù¡Ù ", "Ù¡Ù¡", "Ù¢Ù¦"], correct: 2 },
        { q: "Ú©Û Ø¨ÛŒØ±Ø¯Û†Ø²ÛŒ Â«Ø¯Û•Ø³ØªÛ•Ø¨Û•Ø³Û•Ø±Ø¯Ø§Ú¯Ø±ØªÙ†ÛŒ Ø²Û•ÙˆÛŒÂ» Ù†Ø§Ø³Ø§Ù†Ø¯ÙˆÙˆÛ•ØŸ", opts: ["Ù…Ø§Ø±Ú©Ø³", "Ù‡ÛÚ¯Úµ", "Ù†ÛŒØªØ´Û•", "Ú©Ø§Ù†Øª"], correct: 0 },
      ],
      5: [
        { q: "ÙˆØ§ØªØ§ÛŒ Ø¦Û†Ù†ØªÛ†Ù„Û†Ú˜ÛŒ Ú†ÛŒÛŒÛ•ØŸ", opts: ["Ø²Ø§Ù†Ø³ØªÛŒ Ø¨ÙˆÙˆÙ†", "Ø²Ø§Ù†Ø³ØªÛŒ Ø²Ø§Ù†ÛŒÙ†", "Ø²Ø§Ù†Ø³ØªÛŒ Ú•Û•ÙØªØ§Ø±", "Ø²Ø§Ù†Ø³ØªÛŒ Ø¯Û•Ø±ÙˆÙˆÙ†"], correct: 0 },
        { q: "Ú©Û Â«Ù†Ù‚Ø¯ÛŒ Ù‡Û†Ø´ÛŒ Ú•Û•Ù‡Ø§Â»ÛŒ Ù†ÙˆÙˆØ³ÛŒÙˆÛ•?", opts: ["Ù‡ÛÚ¯Úµ", "Ú©Ø§Ù†Øª", "Ù†ÛŒØªØ´Û•", "Ø´Û†Ù¾Ù†Ù‡Ø§ÙˆØ±"], correct: 1 },
        { q: "ØªÛŒÛ†Ø±ÛŒ Â«Ú¯Û•ÛŒÙ…Â» Ø³Û•Ø¨Ø§Ø±Û•Øª Ø¨Û• Ú†ÛŒÛŒÛ•?", opts: ["ÛŒØ§Ø±ÛŒÛ• Ú¤ÛŒØ¯ÛŒÛ†ÛŒÛŒÛ•Ú©Ø§Ù†", "Ø¨Ú•ÛŒØ§Ø±Ø¯Ø§Ù†ÛŒ Ø³ØªØ±Ø§ØªÛŒÚ˜ÛŒ", "Ø³Ù¾Û†Ø±Øª", "Ú©Û†Ù…Ù¾ÛŒÙˆØªÛ•Ø±"], correct: 1 },
        { q: "Ú©Û Ø¦Û•Ù… Ù‚Ø³Û•ÛŒÛ•ÛŒ Ú¯ÙˆØªÙˆÙˆÛ•: Â«Ø®ÙˆØ§ Ù…Ø±Ø¯ÙˆÙˆÛ•Â»?", opts: ["Ù…Ø§Ø±Ú©Ø³", "ÙØ±Û†ÛŒØ¯", "Ù†ÛŒØªØ´Û•", "Ø³Ø§Ø±ØªØ±"], correct: 2 },
        { q: "Â«Ø¦ÛŒÙ¾ÛŒØ³ØªÛŒÙ…Û†Ù„Û†Ú˜ÛŒÂ» ÙˆØ§ØªÛ• Ú†ÛŒØŸ", opts: ["ØªÛŒÛ†Ø±ÛŒ Ø²Ø§Ù†ÛŒÙ†", "ØªÛŒÛ†Ø±ÛŒ Ø¨ÙˆÙˆÙ†", "ØªÛŒÛ†Ø±ÛŒ Ú•Û•ÙØªØ§Ø±", "ØªÛŒÛ†Ø±ÛŒ Ú©Û†Ù…Û•ÚµÚ¯Ø§"], correct: 0 },
      ]
    };

    // Categories (auto)
    const CATS = ["Ù‡Û•Ù…ÙˆÙˆ", ...Array.from(new Set(matal.map(m=>m.cat)))];

    // State
    let activeCat = "Ù‡Û•Ù…ÙˆÙˆ";
    let query = "";
    let matalList = [...matal];

    // User state
    let currentUser = null;
    let userData = {
      username: "",
      photoURL: "",
      level: 1,
      xp: 0,
      correctAnswers: 0,
      questionsAnswered: []
    };

    // Quiz state
    let currentQuestionIndex = 0;
    let currentLevelQuestions = [];
    let selectedAnswer = null;
    let answered = false;
    let levelCorrect = 0;

    const el = (q)=> document.querySelector(q);
    const $$ = (q)=> document.querySelectorAll(q);

    function formatDate(){
      const d = new Date();
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,"0");
      const day = String(d.getDate()).padStart(2,"0");
      return `${y}/${m}/${day}`;
    }

    function goPage(key){
      $$(".page").forEach(p=>p.classList.remove("active"));
      el("#page-"+key).classList.add("active");

      $$(".navBtn").forEach(b=>b.classList.remove("active"));
      $$(`.navBtn[data-go="${key}"]`).forEach(b=>b.classList.add("active"));

      window.scrollTo({top:0, behavior:"smooth"});

      if(key === "quiz") {
        renderQuiz();
      }
      if(key === "leaderboard") {
        loadLeaderboard();
      }
    }

    function matalCard(m){
      const div = document.createElement("div");
      div.className = "matalCard";
      div.innerHTML = `
        <div class="matalTop">
          <div class="mEmoji">${m.emoji}</div>
          <div class="meta">
            <div class="badge ${m.cat==='Ø¦ÙˆÙ…ÛØ¯' ? 'gold' : ''}">${m.cat}</div>
            <div class="smallDate">${formatDate()}</div>
          </div>
        </div>
        <div class="ribbon">${m.title}</div>
        <div class="matalBody">${m.text}</div>
        <div class="matalFooter">
          <div class="views"><i class="fa-regular fa-eye"></i> ${m.views.toLocaleString("en-US")}</div>
          <div class="miniAction">
            <button class="iconBtn" title="Ú©Û†Ù¾ÛŒ" onclick="event.stopPropagation(); copyText('${escapeForAttr(m.text)}')">
              <i class="fa-regular fa-copy"></i>
            </button>
            <button class="iconBtn" title="Ù¾ÛŒØ´Ø§Ù†Ø¯Ø§Ù†ÛŒ Ø²ÛŒØ§ØªØ±" onclick="event.stopPropagation(); openMatal('${m.id}')">
              <i class="fa-solid fa-up-right-from-square"></i>
            </button>
          </div>
        </div>
      `;
      div.onclick = ()=> openMatal(m.id);
      return div;
    }

    function escapeForAttr(str){
      return (str||"")
        .replaceAll("\\","\\\\")
        .replaceAll("'","\\'")
        .replaceAll("\n"," ");
    }

    function renderChips(){
      const wrap = el("#chips");
      wrap.innerHTML = "";
      CATS.forEach(c=>{
        const b = document.createElement("div");
        b.className = "chip" + (c===activeCat ? " active" : "");
        b.textContent = c;
        b.onclick = ()=>{
          activeCat = c;
          renderChips();
          renderMatal();
        };
        wrap.appendChild(b);
      });
    }

    function getFiltered(){
      const q = (query||"").trim().toLowerCase();
      return matalList.filter(m=>{
        const catOk = (activeCat==="Ù‡Û•Ù…ÙˆÙˆ") ? true : m.cat===activeCat;
        const qOk = !q ? true : (`${m.title} ${m.text} ${m.cat}`.toLowerCase().includes(q));
        return catOk && qOk;
      });
    }

    function renderMatal(){
      const grid = el("#matalGrid");
      grid.innerHTML = "";
      const items = getFiltered();

      el("#resultsHint").textContent =
        items.length
          ? `Ø¦Û•Ù†Ø¬Ø§Ù…: ${items.length} Ù…Û•ØªÛ•Úµ Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•.`
          : "Ù‡ÛŒÚ† Ø¦Û•Ù†Ø¬Ø§Ù…ÛÚ© Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•. ÙˆØ´Û•ÛŒ ØªØ± ØªØ§Ù‚ÛŒ Ø¨Ú©Û•.";

      items.forEach(m=> grid.appendChild(matalCard(m)));
    }

    function openMatal(id){
      const m = matal.find(x=>x.id===id);
      if(!m) return;

      el("#mTitle").textContent = m.title;
      el("#mBody").innerHTML = `
        <div class="sheetBigEmoji">${m.emoji}</div>
        <div class="sheetRibbon">${m.cat} â€” ${m.title}</div>
        <div class="sheetText" id="modalText">${m.text}</div>
        <div class="sheetRow">
          <div><i class="fa-regular fa-eye"></i> ${m.views.toLocaleString("en-US")} Ø¨ÛŒÙ†Ø±Ø§Ùˆ</div>
          <button class="copyBtn" onclick="copyFromModal()">Ú©Û†Ù¾ÛŒ Ø¯Û•Ù‚</button>
        </div>
      `;
      el("#modal").classList.add("show");
    }

    function closeModal(ev){
      if(ev && ev.target && !ev.target.classList.contains("modal")) return;
      el("#modal").classList.remove("show");
    }

    function copyFromModal(){
      const t = el("#modalText")?.textContent || "";
      copyText(t);
    }

    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        toast("âœ… Ø¯Û•Ù‚ Ú©Û†Ù¾ÛŒ Ú©Ø±Ø§");
      }catch(e){
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        toast("âœ… Ø¯Û•Ù‚ Ú©Û†Ù¾ÛŒ Ú©Ø±Ø§");
      }
    }

    function shuffleMatal(){
      const a = [...matalList];
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]] = [a[j],a[i]];
      }
      matalList = a;
      renderMatal();
      toast("ğŸ”€ Ù…Û•ØªÛ•ÚµÛ•Ú©Ø§Ù† ØªÛÚ©Û•Úµ Ú©Ø±Ø§Ù†");
    }

    // =========================================
    // Quiz Functions
    // =========================================
    function renderQuiz() {
      updateStats();
      const container = el("#quizContainer");

      const level = userData.level;
      const questions = quizQuestions[level] || quizQuestions[5];

      if (currentLevelQuestions.length === 0) {
        currentLevelQuestions = [...questions];
        shuffleArray(currentLevelQuestions);
        currentQuestionIndex = 0;
        levelCorrect = 0;
      }

      if (currentQuestionIndex >= currentLevelQuestions.length) {
        renderLevelResult();
        return;
      }

      const question = currentLevelQuestions[currentQuestionIndex];
      const letters = ["Ø¦", "Ø¨", "Ø¬", "Ø¯"];

      container.innerHTML = `
        <div class="quizCard">
          <div class="levelBadge"><i class="fa-solid fa-star"></i> Ø¦Ø§Ø³ØªÛŒ ${level}</div>
          <div class="questionNum">Ù¾Ø±Ø³ÛŒØ§Ø± ${currentQuestionIndex + 1} Ù„Û• ${currentLevelQuestions.length}</div>
          <div class="questionText">${question.q}</div>

          <div class="optionsGrid">
            ${question.opts.map((opt, i) => `
              <button class="optionBtn" onclick="selectAnswer(${i})" data-idx="${i}" ${answered ? 'disabled' : ''}>
                <span class="optionLetter">${letters[i]}</span>
                <span>${opt}</span>
              </button>
            `).join('')}
          </div>

          <div class="quizActions">
            <button class="quizBtn secondary" onclick="skipQuestion()" ${answered ? 'disabled' : ''}>
              <i class="fa-solid fa-forward"></i> ØªÛÙ¾Û•Ú•ÛŒÙ†
            </button>
            <button class="quizBtn primary" onclick="submitAnswer()" ${!selectedAnswer !== null && !answered ? '' : answered ? 'style="display:none"' : 'disabled'} id="submitBtn">
              Ù¾Ø´ØªÚ•Ø§Ø³ØªÚ©Ø±Ø¯Ù†Û•ÙˆÛ•
            </button>
            <button class="quizBtn primary" onclick="nextQuestion()" style="${answered ? '' : 'display:none'}" id="nextBtn">
              Ù¾Ø±Ø³ÛŒØ§Ø±ÛŒ Ø¯Ø§Ù‡Ø§ØªÙˆÙˆ <i class="fa-solid fa-arrow-left"></i>
            </button>
          </div>
        </div>
      `;

      answered = false;
      selectedAnswer = null;
    }

    function selectAnswer(idx) {
      if (answered) return;

      selectedAnswer = idx;
      $$(".optionBtn").forEach((btn, i) => {
        btn.classList.remove("selected");
        if (i === idx) btn.classList.add("selected");
      });

      el("#submitBtn").disabled = false;
    }

    function submitAnswer() {
      if (selectedAnswer === null || answered) return;

      answered = true;
      const question = currentLevelQuestions[currentQuestionIndex];
      const correct = question.correct;

      $$(".optionBtn").forEach((btn, i) => {
        btn.disabled = true;
        if (i === correct) {
          btn.classList.add("correct");
        } else if (i === selectedAnswer && selectedAnswer !== correct) {
          btn.classList.add("wrong");
        }
      });

      if (selectedAnswer === correct) {
        levelCorrect++;
        userData.correctAnswers++;
        userData.xp += 10 * userData.level;
        toast("âœ… Ú•Ø§Ø³ØªÛ•! +" + (10 * userData.level) + " Ø®Ø§Úµ");
      } else {
        toast("âŒ Ù‡Û•ÚµÛ•! ÙˆÛ•ÚµØ§Ù…ÛŒ Ú•Ø§Ø³Øª: " + question.opts[correct]);
      }

      updateStats();
      saveUserData();

      el("#submitBtn").style.display = "none";
      el("#nextBtn").style.display = "";
    }

    function nextQuestion() {
      currentQuestionIndex++;
      selectedAnswer = null;
      answered = false;
      renderQuiz();
    }

    function skipQuestion() {
      currentQuestionIndex++;
      selectedAnswer = null;
      answered = false;
      renderQuiz();
    }

    function renderLevelResult() {
      const container = el("#quizContainer");
      const total = currentLevelQuestions.length;
      const percentage = Math.round((levelCorrect / total) * 100);
      const passed = percentage >= 60;

      let emoji = "ğŸ˜¢";
      let title = "Ù‡Û•ÙˆÚµÛŒ ØªØ± Ø¨Ø¯Û•!";
      if (percentage >= 80) { emoji = "ğŸ†"; title = "Ù†Ø§ÛŒØ§Ø¨!"; }
      else if (percentage >= 60) { emoji = "ğŸ‰"; title = "Ø²Û†Ø± Ø¨Ø§Ø´Û•!"; }
      else if (percentage >= 40) { emoji = "ğŸ’ª"; title = "Ù†Ø²ÛŒÚ© Ø¨ÙˆÙˆÛŒØª!"; }

      if (passed && userData.level < 5) {
        userData.level++;
        userData.xp += 50;
        saveUserData();
      }

      container.innerHTML = `
        <div class="quizCard">
          <div class="resultCard">
            <div class="resultEmoji">${emoji}</div>
            <div class="resultTitle">${title}</div>
            <div class="resultDesc">
              ${passed ? `Ø¦Ø§Ø³ØªÛŒ ${userData.level - 1} ØªÛ•ÙˆØ§Ùˆ Ú©Ø±Ø§! ${userData.level <= 5 ? 'Ø¦ÛØ³ØªØ§ Ù„Û• Ø¦Ø§Ø³ØªÛŒ ' + userData.level + 'ÛŒØª' : 'Ù‡Û•Ù…ÙˆÙˆ Ø¦Ø§Ø³ØªÛ•Ú©Ø§Ù† ØªÛ•ÙˆØ§Ùˆ Ú©Ø±Ø¯ÛŒØª!'}` : 'Ù¾ÛÙˆÛŒØ³ØªÛ• Ù„Ø§Ù†ÛŒÚ©Û•Ù… Ù¦Ù Ùª ÙˆÛ•ÚµØ§Ù…ÛŒ Ú•Ø§Ø³Øª Ø¨Ø¯Û•ÛŒØªÛ•ÙˆÛ• Ø¨Û† ØªÛÙ¾Û•Ú•ÛŒÙ†'}
            </div>
            <div class="resultStats">
              <div class="statBox">
                <div class="statValue">${levelCorrect}/${total}</div>
                <div class="statLabel">ÙˆÛ•ÚµØ§Ù…ÛŒ Ú•Ø§Ø³Øª</div>
              </div>
              <div class="statBox">
                <div class="statValue">${percentage}%</div>
                <div class="statLabel">Ú•ÛÚ˜Û•</div>
              </div>
            </div>
            <button class="quizBtn primary" onclick="restartLevel()" style="width:100%">
              ${passed ? 'Ø¯Û•Ø³ØªÙ¾ÛÚ©Ø±Ø¯Ù†ÛŒ Ø¦Ø§Ø³ØªÛŒ Ù†ÙˆÛ' : 'Ù‡Û•ÙˆÚµÛŒ Ø¯ÙˆÙˆØ¨Ø§Ø±Û•'} <i class="fa-solid fa-redo"></i>
            </button>
          </div>
        </div>
      `;

      updateStats();
    }

    function restartLevel() {
      currentLevelQuestions = [];
      currentQuestionIndex = 0;
      levelCorrect = 0;
      renderQuiz();
    }

    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function updateStats() {
      el("#statLevel").textContent = userData.level;
      el("#statXP").textContent = userData.xp;
      el("#statCorrect").textContent = userData.correctAnswers;

      if (currentUser) {
        el("#userLvlBadge").style.display = "";
        el("#userLvlBadge").textContent = "Lvl " + userData.level;
      }
    }

    // =========================================
    // Leaderboard Functions
    // =========================================
    async function loadLeaderboard() {
      const container = el("#leaderList");
      container.innerHTML = `
        <div class="leaderLoading">
          <i class="fa-solid fa-spinner fa-spin"></i> Ú†Ø§ÙˆÛ•Ú•ÙˆØ§Ù† Ø¨Û•...
        </div>
      `;

      try {
        const snapshot = await db.collection("users")
          .orderBy("correctAnswers", "desc")
          .limit(10)
          .get();

        if (snapshot.empty) {
          container.innerHTML = `
            <div class="leaderEmpty">
              <i class="fa-solid fa-users-slash"></i><br>
              Ù‡ÛŒÚ† ÛŒØ§Ø±ÛŒØ²Ø§Ù†ÛÚ© Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•.<br>
              ÛŒÛ•Ú©Û•Ù… Ú©Û•Ø³ Ø¨Û• Ú©Û• ÛŒØ§Ø±ÛŒ Ø¯Û•Ú©Ø§Øª!
            </div>
          `;
          return;
        }

        container.innerHTML = "";
        let rank = 0;

        snapshot.forEach((doc) => {
          rank++;
          const data = doc.data();
          const isCurrentUser = currentUser && doc.id === currentUser.uid;

          let rankClass = "";
          if (rank === 1) rankClass = "gold";
          else if (rank === 2) rankClass = "silver";
          else if (rank === 3) rankClass = "bronze";

          let itemClass = "";
          if (rank === 1) itemClass = "top1";
          else if (rank === 2) itemClass = "top2";
          else if (rank === 3) itemClass = "top3";
          if (isCurrentUser) itemClass += " current";

          const avatarHtml = data.photoURL
            ? `<img class="leaderAvatar" src="${data.photoURL}" alt="${data.username}" onerror="this.outerHTML='<div class=\\'leaderAvatarPlaceholder\\'><i class=\\'fa-solid fa-user\\'></i></div>'">`
            : `<div class="leaderAvatarPlaceholder"><i class="fa-solid fa-user"></i></div>`;

          const item = document.createElement("div");
          item.className = `leaderItem ${itemClass}`;
          item.innerHTML = `
            <div class="leaderRank ${rankClass}">${rank}</div>
            ${avatarHtml}
            <div class="leaderInfo">
              <div class="leaderName">${data.username || 'ÛŒØ§Ø±ÛŒØ²Ø§Ù†'} ${isCurrentUser ? '(ØªÛ†)' : ''}</div>
              <div class="leaderMeta">Ø¦Ø§Ø³ØªÛŒ ${data.level || 1} â€¢ ${data.xp || 0} Ø®Ø§Úµ</div>
            </div>
            <div class="leaderScore">
              <div class="leaderCorrect">${data.correctAnswers || 0}</div>
              <div class="leaderLabel">Ú•Ø§Ø³Øª</div>
            </div>
          `;
          container.appendChild(item);
        });

      } catch (err) {
        console.error("Error loading leaderboard:", JSON.stringify(err));
        container.innerHTML = `
          <div class="leaderEmpty">
            <i class="fa-solid fa-exclamation-triangle"></i><br>
            Ù‡Û•ÚµÛ•ÛŒÛ•Ú© Ú•ÙˆÙˆÛŒØ¯Ø§ Ù„Û• Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ù¾Ù„Û•Ø¨Û•Ù†Ø¯ÛŒ
          </div>
        `;
      }
    }

    // =========================================
    // Auth Functions
    // =========================================
    function showAuth() {
      el("#authOverlay").classList.add("show");
      el("#userDropdown").classList.remove("show");
    }

    function hideAuth(ev) {
      if (ev && ev.target && !ev.target.classList.contains("authOverlay") && ev.target.tagName !== "BUTTON") return;
      el("#authOverlay").classList.remove("show");
      el("#authError").classList.remove("show");
    }

    async function handleGoogleLogin() {
      el("#googleBtn").disabled = true;

      try {
        const result = await auth.signInWithPopup(googleProvider);
        const user = result.user;

        // Check if user document exists
        const userDoc = await db.collection("users").doc(user.uid).get();

        if (!userDoc.exists) {
          // Create new user document
          await db.collection("users").doc(user.uid).set({
            username: user.displayName || user.email.split("@")[0],
            photoURL: user.photoURL || "",
            level: 1,
            xp: 0,
            correctAnswers: 0,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
          });
        } else {
          // Update photo URL if changed
          if (user.photoURL && user.photoURL !== userDoc.data().photoURL) {
            await db.collection("users").doc(user.uid).update({
              photoURL: user.photoURL
            });
          }
        }

        toast("âœ… Ú†ÙˆÙˆÛŒØªÛ• Ú˜ÙˆÙˆØ±Û•ÙˆÛ•!");
        hideAuth();
      } catch (err) {
        console.error("Google login error:", JSON.stringify(err));
        let msg = "Ù‡Û•ÚµÛ•ÛŒÛ•Ú© Ú•ÙˆÙˆÛŒØ¯Ø§";
        if (err.code === "auth/popup-closed-by-user") msg = "Ù¾Û•Ù†Ø¬Û•Ø±Û•Ú©Û• Ø¯Ø§Ø®Ø±Ø§";
        if (err.code === "auth/cancelled-popup-request") msg = "Ø¯Ø§ÙˆØ§Ú©Ø§Ø±ÛŒ Ù‡Û•ÚµÙˆÛ•Ø´Ø§ÛŒÛ•ÙˆÛ•";
        if (err.code === "auth/popup-blocked") msg = "Ù¾Û•Ù†Ø¬Û•Ø±Û• Ø¨Ù„Û†Ú© Ú©Ø±Ø§. ØªÚ©Ø§ÛŒÛ• Pop-up Ú•ÛÚ¯Û•Ù¾ÛØ¨Ø¯Û•";
        showAuthError(msg);
      }

      el("#googleBtn").disabled = false;
    }

    function showAuthError(msg) {
      el("#authError").textContent = msg;
      el("#authError").classList.add("show");
    }

    function toggleUserDropdown() {
      el("#userDropdown").classList.toggle("show");
    }

    async function logout() {
      await auth.signOut();
      toast("Ú†ÙˆÙˆÛŒØªÛ• Ø¯Û•Ø±Û•ÙˆÛ•");
      el("#userDropdown").classList.remove("show");
    }

    async function loadUserData(uid) {
      try {
        const doc = await db.collection("users").doc(uid).get();
        if (doc.exists) {
          const data = doc.data();
          userData.username = data.username || "";
          userData.photoURL = data.photoURL || "";
          userData.level = data.level || 1;
          userData.xp = data.xp || 0;
          userData.correctAnswers = data.correctAnswers || 0;
        }
      } catch (err) {
        console.error("Error loading user data:", JSON.stringify(err));
      }
    }

    async function saveUserData() {
      if (!currentUser) return;
      try {
        await db.collection("users").doc(currentUser.uid).update({
          level: userData.level,
          xp: userData.xp,
          correctAnswers: userData.correctAnswers
        });
      } catch (err) {
        console.error("Error saving user data:", JSON.stringify(err));
      }
    }

    // Auth state listener
    auth.onAuthStateChanged(async (user) => {
      currentUser = user;

      if (user) {
        await loadUserData(user.uid);

        // Update UI with user info
        const displayName = userData.username || user.displayName || user.email.split("@")[0];
        el("#userNameDisplay").textContent = displayName;

        // Show avatar if available
        if (user.photoURL || userData.photoURL) {
          el("#userAvatar").src = user.photoURL || userData.photoURL;
          el("#userAvatar").style.display = "";
          el("#userIcon").style.display = "none";
        } else {
          el("#userAvatar").style.display = "none";
          el("#userIcon").style.display = "";
        }

        el("#userLvlBadge").style.display = "";
        el("#userLvlBadge").textContent = "Lvl " + userData.level;
        el("#dropProfile").style.display = "";
        el("#dropUsername").textContent = displayName;
        el("#dropLogin").style.display = "none";
        el("#dropLogout").style.display = "";
      } else {
        userData = { username: "", photoURL: "", level: 1, xp: 0, correctAnswers: 0, questionsAnswered: [] };
        el("#userNameDisplay").textContent = "Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•";
        el("#userAvatar").style.display = "none";
        el("#userIcon").style.display = "";
        el("#userLvlBadge").style.display = "none";
        el("#dropProfile").style.display = "none";
        el("#dropLogin").style.display = "";
        el("#dropLogout").style.display = "none";
      }

      updateStats();
    });

    // Close dropdown when clicking outside
    document.addEventListener("click", (e) => {
      if (!e.target.closest("#userPill") && !e.target.closest("#userDropdown")) {
        el("#userDropdown").classList.remove("show");
      }
    });

    // Toast
    let toastTimer = null;
    function toast(msg){
      clearTimeout(toastTimer);
      let t = document.getElementById("toast");
      if(!t){
        t = document.createElement("div");
        t.id = "toast";
        t.style.cssText = `
          position:fixed;left:50%;bottom:96px;transform:translateX(-50%);
          padding:12px 14px;border-radius:16px;background:rgba(0,0,0,.75);
          border:1px solid rgba(255,255,255,.14);backdrop-filter:blur(12px);
          color:rgba(233,238,252,.95);font-weight:900;
          box-shadow:0 18px 60px rgba(0,0,0,.55);z-index:999;
          max-width:min(460px,calc(100% - 26px));text-align:center;
          transition:opacity .3s ease;
        `;
        document.body.appendChild(t);
      }
      t.textContent = msg;
      t.style.opacity = "1";
      toastTimer = setTimeout(()=>{ t.style.opacity = "0"; }, 2000);
    }

    // Nav buttons
    $$(".navBtn").forEach(btn=>{
      btn.addEventListener("click", ()=> goPage(btn.dataset.go));
    });

    // Search input
    el("#q").addEventListener("input", (e)=>{
      query = e.target.value || "";
      renderMatal();
    });

    // Init
    renderChips();
    renderMatal();
  </script>
</body>
</html>
